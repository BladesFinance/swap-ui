(this["webpackJsonpswap-ui"]=this["webpackJsonpswap-ui"]||[]).push([[0],{236:function(e,t,n){},241:function(e,t){},242:function(e,t){},244:function(e,t){},266:function(e,t){},267:function(e,t){},287:function(e,t){},296:function(e,t){},297:function(e,t){},301:function(e,t){},302:function(e,t){},315:function(e,t){},317:function(e,t){},334:function(e,t){},348:function(e,t,n){},349:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(29),a=n.n(i),c=(n(236),n(2)),s=n.n(c),l=n(6),u=n(16),d=n(19),b=n(138),p=n(51),j=n(36),f=n(38),x=n(20),m=n(166),v=n(399),O=n(56),h=n(212),g=n(8),w=n(219),y=n(214),k=n(387),C=n(412),S=n(142),M=n(350),T=n(417),A=n(413),F=n(15),P=new g.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),N=new g.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),B=new g.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),E=new g.PublicKey("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),K=n(22),L=n(104),R=n(74),W=n(7),q=o.a.createContext(null);function I(e){var t=Object(r.useMemo)((function(){return e.tokenList.filterByClusterSlug("mainnet-beta").getList()}),[e.tokenList]),n=Object(r.useMemo)((function(){var e=new Map;return t.forEach((function(t){e.set(t.address,t)})),e}),[t]),o=Object(r.useMemo)((function(){var e=t.filter((function(e){var t,n,r=(null===(t=e.extensions)||void 0===t?void 0:t.serumV3Usdt)||(null===(n=e.extensions)||void 0===n?void 0:n.serumV3Usdc),o="So11111111111111111111111111111111111111112"===e.address;return r&&!o})).concat([n.get(N.toString()),n.get(B.toString())]);return e.sort((function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0})),e}),[t,n]),i=Object(r.useMemo)((function(){var e=t.filter((function(e){var t;return null===(t=e.tags)||void 0===t?void 0:t.includes("wrapped-sollet")}));return e.sort((function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0})),e}),[t]),a=Object(r.useMemo)((function(){var e=t.filter((function(e){var t;return null===(t=e.tags)||void 0===t?void 0:t.includes("wormhole")}));return e.sort((function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0})),e}),[t]);return Object(W.jsx)(q.Provider,{value:{tokenMap:n,swappableTokens:o,swappableTokensWormhole:a,swappableTokensSollet:i},children:e.children})}function D(){var e=Object(r.useContext)(q);if(null===e)throw new Error("Context not available");return e}function z(){return D().tokenMap}var U=o.a.createContext(null);function _(e){var t=Object(r.useState)(new Map),n=Object(x.a)(t,2),o=n[0],i=n[1],a=Object(r.useState)(new Map),c=Object(x.a)(a,2),u=c[0],d=c[1],b=Object(r.useState)(new Map),p=Object(x.a)(b,2),j=p[0],f=p[1],m=e.swapClient;return Object(r.useEffect)((function(){m.program.provider.wallet.publicKey?R.OpenOrders.findForOwner(m.program.provider.connection,m.program.provider.wallet.publicKey,E).then(function(){var e=Object(l.a)(s.a.mark((function e(t){var n,r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new Map,r=new Set,t.forEach((function(e){r.add(e.market.toString()),n.get(e.market.toString())?n.get(e.market.toString()).push(e):n.set(e.market.toString(),[e])})),!(r.size>100)){e.next=5;break}throw new Error("Too many markets. Please file an issue to update this");case 5:return e.next=7,O.utils.getMultipleAccounts(m.program.provider.connection,Object(K.a)(r).map((function(e){return new g.PublicKey(e)})));case 7:o=e.sent.map((function(e){return{publicKey:null===e||void 0===e?void 0:e.publicKey,account:new R.Market(R.Market.getLayout(E).decode(null===e||void 0===e?void 0:e.account.data),-1,-1,m.program.provider.opts,E)}})),d((function(e){var t=new Map(e);return o.forEach((function(e){t.set(e.publicKey.toString(),e.account)})),t})),i(n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):i(new Map)}),[m.program.provider.connection,m.program.provider.wallet.publicKey,m.program.provider.opts]),Object(W.jsx)(U.Provider,{value:{openOrders:o,marketCache:u,setMarketCache:d,orderbookCache:j,setOrderbookCache:f,swapClient:m},children:e.children})}function G(){var e=Object(r.useContext)(U);if(null===e)throw new Error("Context not available");return e}function V(){return G().openOrders}function H(e){var t=G(),n=Object(L.a)(Object(l.a)(s.a.mark((function n(){var r,o;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",void 0);case 2:if(!t.marketCache.get(e.toString())){n.next=4;break}return n.abrupt("return",t.marketCache.get(e.toString()));case 4:return n.next=6,R.Market.load(t.swapClient.program.provider.connection,e,void 0,E);case 6:return r=n.sent,(o=new Map(t.marketCache)).set(e.toString(),r),t.setMarketCache(o),n.abrupt("return",r);case 11:case"end":return n.stop()}}),n)}))),[t.swapClient.program.provider.connection,e]);if(n.result)return n.result}function J(e){var t=function(e){var t=G(),n=t.swapClient,r=t.orderbookCache,o=t.setOrderbookCache,i=H(e),a=Object(L.a)(Object(l.a)(s.a.mark((function t(){var a,c,l,u,d,b;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&i){t.next=2;break}return t.abrupt("return",void 0);case 2:if(!r.get(e.toString())){t.next=4;break}return t.abrupt("return",r.get(e.toString()));case 4:return t.next=6,Promise.all([i.loadBids(n.program.provider.connection),i.loadAsks(n.program.provider.connection)]);case 6:return a=t.sent,c=Object(x.a)(a,2),l=c[0],u=c[1],d={bids:l,asks:u},(b=new Map(r)).set(e.toString(),d),o(b),t.abrupt("return",d);case 15:case"end":return t.stop()}}),t)}))),[n.program.provider.connection,e,i]);if(a.result)return a.result}(e);if(void 0!==t){var n=t.bids.items(!0).next().value,r=t.asks.items(!1).next().value;return(n.price+r.price)/2}}function Q(e,t){var n=G().swapClient;return Object(r.useMemo)((function(){return n.route(e,t)}),[n,e,t])}var X=o.a.createContext(null);function Y(e){var t=Object(r.useState)(P),n=Object(x.a)(t,2),o=n[0],i=n[1],a=Object(r.useState)(N),c=Object(x.a)(a,2),s=c[0],l=c[1],u=Object(r.useState)(0),d=Object(x.a)(u,2),b=d[0],p=d[1],j=Object(r.useState)(0),f=Object(x.a)(j,2),m=f[0],v=f[1],O=Object(r.useState)(!1),h=Object(x.a)(O,2),g=h[0],w=h[1],y=Object(r.useState)(.5),k=Object(x.a)(y,2),C=k[0],S=k[1],M=Object(r.useState)(null),T=Object(x.a)(M,2),A=T[0],B=T[1],E=ee(o,s,A);F.ok(C>=0);return Object(W.jsx)(X.Provider,{value:{fromMint:o,setFromMint:i,toMint:s,setToMint:l,fromAmount:b,setFromAmount:function(e){if(void 0===E)throw new Error("Fair price not found");p(e),v(e/E)},toAmount:m,setToAmount:function(e){if(void 0===E)throw new Error("Fair price not found");v(e),p(e*E)},swapToFromMints:function(){var e=o,t=b,n=m;i(s),l(e),p(n),v(t)},slippage:C,setSlippage:S,fairOverride:A,setFairOverride:B,isClosingNewAccounts:g,setIsClosingNewAccounts:w},children:e.children})}function Z(){var e=Object(r.useContext)(X);if(null===e)throw new Error("Context not available");return e}function $(){var e=Z(),t=e.fairOverride;return ee(e.fromMint,e.toMint,t)}function ee(e,t,n){var r=function(e,t){var n=Q(e,t),r=J(n?n[0]:void 0),o=H(n?n[0]:void 0),i=J(n?n[1]:void 0);if(null!==n){if(1===n.length&&void 0!==r){if(void 0===o)return;return(null===o||void 0===o?void 0:o.baseMintAddress.equals(e))?1/r:r}if(void 0!==r&&void 0!==i)return i/r}}(e,t);return null===n?r:n}var te=n(80),ne=o.a.createContext(null);function re(e){var t=e.provider,n=Object(r.useState)(new Map),o=Object(x.a)(n,2),i=o[0],a=o[1];return Object(W.jsx)(ne.Provider,{value:{mintCache:i,setMintCache:a,provider:t},children:e.children})}function oe(e){var t=Object(r.useContext)(ne);if(null===t)throw new Error("Mint context not found");var n=Object(L.a)(Object(l.a)(s.a.mark((function n(){var r,o,i;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",void 0);case 2:if(!t.mintCache.get(e.toString())){n.next=4;break}return n.abrupt("return",t.mintCache.get(e.toString()));case 4:return r=new te.Token(t.provider.connection,e,te.TOKEN_PROGRAM_ID,new g.Account),n.next=7,r.getMintInfo();case 7:return o=n.sent,(i=new Map(t.mintCache)).set(e.toString(),o),t.setMintCache(i),n.abrupt("return",o);case 12:case"end":return n.stop()}}),n)}))),[t.provider.connection,e]);if(n.result)return n.result}var ie=n(3),ae=n(24);function ce(){return(ce=Object(l.a)(s.a.mark((function e(t,n){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ue(n),e.next=3,t._rpcRequest("getProgramAccounts",[te.TOKEN_PROGRAM_ID.toBase58(),{commitment:t.commitment,filters:r}]);case 3:if(!(o=e.sent).error){e.next=6;break}throw new Error("failed to get token accounts owned by "+n.toBase58()+": "+o.error.message);case 6:return e.abrupt("return",o.result.map((function(e){var t=e.pubkey,n=e.account,r=n.data,o=n.executable,i=n.owner,a=n.lamports;return{publicKey:new g.PublicKey(t),accountInfo:{data:ae.decode(r),executable:o,owner:new g.PublicKey(i),lamports:a}}})).filter((function(e){var t=e.accountInfo;return r.every((function(e){if(e.dataSize)return t.data.length===e.dataSize;if(e.memcmp){var n=ae.decode(e.memcmp.bytes);return t.data.slice(e.memcmp.offset,e.memcmp.offset+n.length).equals(n)}return!1}))})).map((function(e){return{publicKey:e.publicKey,account:le(e.accountInfo.data)}})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var se=ie.struct([ie.blob(32,"mint"),ie.blob(32,"owner"),ie.nu64("amount"),ie.blob(93)]);ie.struct([ie.blob(44),ie.u8("decimals"),ie.blob(37)]);function le(e){var t=se.decode(e),n=t.mint,r=t.owner,o=t.amount;return{mint:new g.PublicKey(n),owner:new g.PublicKey(r),amount:new O.BN(o)}}function ue(e){return[{memcmp:{offset:se.offsetOf("owner"),bytes:e.toBase58()}},{dataSize:se.span}]}var de=o.a.createContext(null);function be(e){var t=e.provider,n=Object(r.useState)(void 0),o=Object(x.a)(n,2),i=o[0],a=o[1];return Object(r.useEffect)((function(){t.wallet.publicKey?function(e,t){return ce.apply(this,arguments)}(t.connection,t.wallet.publicKey).then(a):a(void 0)}),[t.wallet.publicKey,t.connection]),Object(W.jsx)(de.Provider,{value:{ownedTokenAccounts:i},children:e.children})}function pe(e){var t=Object(r.useContext)(de);if(null===t)throw new Error("Context not available");if(void 0===e)return e;if(void 0!==t.ownedTokenAccounts){var n=t.ownedTokenAccounts.filter((function(t){return t.account.mint.equals(e)}));return 0===n.length?null:(n.sort((function(e,t){return e.account.amount<t.account.amount?-1:e.account.amount>t.account.amount?1:0})),n[0])}}var je=n(418),fe=n(388),xe=n(392),me=n(391),ve=n(393),Oe=n(414),he=n(394),ge=n(351),we=Object(k.a)((function(){return{dialogContent:{paddingTop:0},textField:{width:"100%",border:"solid 1pt #ccc",borderRadius:"10px",marginBottom:"8px"},tab:{minWidth:"134px"}}}));function ye(e){var t=e.open,n=e.onClose,o=e.setMint,i=Object(r.useState)(0),a=Object(x.a)(i,2),c=a[0],s=a[1],l=Object(r.useState)(""),u=Object(x.a)(l,2),d=u[0],b=u[1],p=d.toLowerCase(),j=we(),f=function(){var e=D();return{swappableTokens:e.swappableTokens,swappableTokensWormhole:e.swappableTokensWormhole,swappableTokensSollet:e.swappableTokensSollet}}(),m=f.swappableTokens,v=f.swappableTokensSollet,O=f.swappableTokensWormhole,h=0===c?m:1===c?O:v,g=""===d?h:h.filter((function(e){return e.symbol.toLowerCase().startsWith(p)||e.name.toLowerCase().startsWith(p)||e.address.toLowerCase().startsWith(p)}));return Object(W.jsxs)(je.a,{open:t,onClose:n,scroll:"paper",PaperProps:{style:{borderRadius:"10px",width:"420px"}},children:[Object(W.jsxs)(fe.a,{style:{fontWeight:"bold"},children:[Object(W.jsx)(S.a,{variant:"h6",style:{paddingBottom:"16px"},children:"Select a token"}),Object(W.jsx)(T.a,{className:j.textField,placeholder:"Search name",value:d,onChange:function(e){return b(e.target.value)},InputProps:{disableUnderline:!0,style:{padding:"10px"}}})]}),Object(W.jsx)(xe.a,{className:j.dialogContent,dividers:!0,children:Object(W.jsx)(me.a,{disablePadding:!0,children:g.map((function(e){return Object(W.jsx)(ke,{tokenInfo:e,onClick:function(e){o(e),n(),b("")}},e.address)}))})}),Object(W.jsx)(ve.a,{children:Object(W.jsxs)(Oe.a,{value:c,onChange:function(e,t){return s(t)},children:[Object(W.jsx)(he.a,{value:0,className:j.tab,label:"Main"}),Object(W.jsx)(he.a,{value:1,className:j.tab,label:"Wormhole"}),Object(W.jsx)(he.a,{value:2,className:j.tab,label:"Sollet"})]})})]})}function ke(e){var t=e.tokenInfo,n=e.onClick,r=new g.PublicKey(t.address);return Object(W.jsxs)(ge.a,{button:!0,onClick:function(){return n(r)},children:[Object(W.jsx)(ft,{mint:r,style:{width:"30px",borderRadius:"15px"}}),Object(W.jsx)(Ce,{tokenInfo:t})]})}function Ce(e){var t=e.tokenInfo;return Object(W.jsxs)("div",{style:{marginLeft:"16px"},children:[Object(W.jsx)(S.a,{style:{fontWeight:"bold"},children:null===t||void 0===t?void 0:t.symbol}),Object(W.jsx)(S.a,{color:"textSecondary",style:{fontSize:"14px"},children:null===t||void 0===t?void 0:t.name})]})}var Se=n(25),Me=n(395),Te=n(420),Ae=n(397),Fe=n(400),Pe=n(401),Ne=n(421),Be=n(403),Ee=n(404),Ke=n(405),Le=n(406),Re=n(407),We=n(408),qe=n(409),Ie=n(415),De=n(410),ze=n(398),Ue=n(396),_e=n(402),Ge=n(69),Ve=n.n(Ge),He=Object(k.a)((function(e){return{tab:{width:"50%"},table:{},settingsButton:{padding:0},closeAccountSwitchLabel:{color:e.palette.text.secondary}}}));function Je(){var e=He();return Object(W.jsx)(Ve.a,{variant:"popover",children:function(t){return Object(W.jsxs)("div",{children:[Object(W.jsx)(Me.a,Object(Se.a)(Object(Se.a)({},Object(Ge.bindTrigger)(t)),{},{className:e.settingsButton,children:Object(W.jsx)(Ue.a,{})})),Object(W.jsx)(Te.a,Object(Se.a)(Object(Se.a)({},Object(Ge.bindPopover)(t)),{},{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{borderRadius:"10px"}},children:Object(W.jsx)(Qe,{})}))]})}})}function Qe(){var e=Z(),t=e.slippage,n=e.setSlippage,o=e.fairOverride,i=e.setFairOverride,a=Object(r.useState)(!1),c=Object(x.a)(a,2),s=c[0],l=c[1],u=$(),d=G().swapClient;return Object(W.jsxs)("div",{style:{padding:"15px",width:"305px"},children:[Object(W.jsx)(S.a,{color:"textSecondary",style:{fontWeight:"bold"},children:"Settings"}),Object(W.jsxs)("div",{style:{marginTop:"10px"},children:[Object(W.jsxs)("div",{children:[Object(W.jsx)(S.a,{color:"textSecondary",children:"Slippage tolerance"}),Object(W.jsx)(T.a,{type:"number",placeholder:"Error tolerance percentage",value:t,onChange:function(e){return n(parseFloat(e.target.value))},style:{display:"flex",justifyContent:"center",flexDirection:"column"},InputProps:{endAdornment:Object(W.jsx)(Ae.a,{position:"end",children:"%"})}})]}),Object(W.jsxs)("div",{style:{marginTop:"5px"},children:[Object(W.jsx)(S.a,{color:"textSecondary",children:"Fair price"}),Object(W.jsxs)("div",{style:{display:"flex"},children:[Object(W.jsx)(T.a,{type:"number",placeholder:"Fair price override",value:u,onChange:function(e){return i(parseFloat(e.target.value))},style:{marginRight:"10px",flex:1,display:"flex",justifyContent:"center",flexDirection:"column"},disabled:null===o}),Object(W.jsx)(ze.a,{value:"bold",selected:null===o,onClick:function(){void 0!==u?i(null===o?u:null):console.error("Fair is undefined")},style:{paddingTop:"3px",paddingBottom:"3px",paddingLeft:"5px",paddingRight:"5px",borderRadius:"20px"},children:"Auto"})]})]}),Object(W.jsx)("div",{style:{marginTop:"5px"},children:Object(W.jsx)(Xe,{})}),Object(W.jsx)(v.a,{style:{width:"100%",marginTop:"10px",background:"#e0e0e0"},disabled:null===d.program.provider.wallet.publicKey,onClick:function(){return l(!0)},children:"Manage Dex Accounts"})]}),Object(W.jsx)(Ye,{open:s,onClose:function(){return l(!1)}})]})}function Xe(){var e=He(),t=Z(),n=t.isClosingNewAccounts,r=t.setIsClosingNewAccounts;return Object(W.jsx)(Fe.a,{row:!0,children:Object(W.jsx)(Pe.a,{classes:{label:e.closeAccountSwitchLabel},labelPlacement:"start",style:{display:"flex",justifyContent:"space-between",marginLeft:0,width:"100%"},control:Object(W.jsx)(Ne.a,{checked:n,onChange:function(){return r(!n)},color:"primary"}),label:"Close new accounts"})})}function Ye(e){var t=e.open,n=e.onClose;return Object(W.jsx)(je.a,{maxWidth:"lg",open:t,onClose:n,PaperProps:{style:{borderRadius:"10px"}},children:Object(W.jsxs)("div",{children:[Object(W.jsx)("div",{style:{height:"24px",display:"flex",justifyContent:"space-between"},children:Object(W.jsx)(Me.a,{onClick:n,style:{padding:0,position:"absolute",right:"8px",top:"8px"},children:Object(W.jsx)(_e.a,{})})}),Object(W.jsx)(xe.a,{style:{paddingTop:0},children:Object(W.jsx)(Ze,{})})]})})}function Ze(){var e=He(),t=V();return Object(W.jsx)(Be.a,{component:M.a,elevation:0,children:Object(W.jsxs)(Ee.a,{className:e.table,"aria-label":"simple table",children:[Object(W.jsx)(Ke.a,{children:Object(W.jsxs)(Le.a,{children:[Object(W.jsx)(Re.a,{children:"Market"}),Object(W.jsx)(Re.a,{align:"center",children:"Open Orders Account"}),Object(W.jsx)(Re.a,{align:"center",children:"Base Used"}),Object(W.jsx)(Re.a,{align:"center",children:"Base Free"}),Object(W.jsx)(Re.a,{align:"center",children:"Quote Used"}),Object(W.jsx)(Re.a,{align:"center",children:"Quote Free"}),Object(W.jsx)(Re.a,{align:"center",children:"Settle"}),Object(W.jsx)(Re.a,{align:"center",children:"Close"})]})}),Object(W.jsx)(We.a,{children:Array.from(t.entries()).map((function(e){var t=Object(x.a)(e,2),n=t[0],r=t[1];return Object(W.jsx)($e,{market:new g.PublicKey(n),openOrders:r},n)}))})]})})}function $e(e){var t,n,o=e.market,i=e.openOrders,a=Object(r.useState)(i[0]),c=Object(x.a)(a,2),u=c[0],d=c[1],b=G().swapClient,p=H(o),j=z(),f=oe(null===p||void 0===p?void 0:p.baseMintAddress),m=oe(null===p||void 0===p?void 0:p.quoteMintAddress),O=pe(null===p||void 0===p?void 0:p.baseMintAddress),h=pe(null===p||void 0===p?void 0:p.quoteMintAddress),g=p?null===(t=j.get(null===p||void 0===p?void 0:p.baseMintAddress.toString()))||void 0===t?void 0:t.symbol:"-",w=p?null===(n=j.get(null===p||void 0===p?void 0:p.quoteMintAddress.toString()))||void 0===n?void 0:n.symbol:"-",y=g&&w?"".concat(g," / ").concat(w):o.toString(),k=u.baseTokenFree.toNumber()+u.quoteTokenFree.toNumber()===0,C=u.baseTokenTotal.toNumber()+u.quoteTokenTotal.toNumber()!==0,M=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=2;break}throw new Error("Market client not found");case 2:if(O&&h){e.next=4;break}throw new Error("Base or quote wallet not found");case 4:return void 0,e.next=7,p.makeSettleFundsTransaction(b.program.provider.connection,u,O.publicKey,h.publicKey,undefined);case 7:return t=e.sent,n=t.transaction,r=t.signers,e.next=12,b.program.provider.send(n,r);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(W.jsxs)(Le.a,{children:[Object(W.jsx)(Re.a,{component:"th",scope:"row",children:Object(W.jsx)(S.a,{children:Object(W.jsx)(qe.a,{href:"https://dex.projectserum.com/#/market/".concat(o.toString()),target:"_blank",rel:"noopener",children:y})})}),Object(W.jsx)(Re.a,{align:"center",children:Object(W.jsx)(Ie.a,{value:u.address.toString(),onChange:function(e){return d(i.filter((function(t){return t.address.toString()===e.target.value}))[0])},children:i.map((function(e){return Object(W.jsx)(De.a,{value:e.address.toString(),children:e.address.toString()},e.address.toString())}))})}),Object(W.jsx)(Re.a,{align:"center",children:et(f,u.baseTokenTotal.sub(u.baseTokenFree))}),Object(W.jsx)(Re.a,{align:"center",children:et(f,u.baseTokenFree)}),Object(W.jsx)(Re.a,{align:"center",children:et(m,u.quoteTokenTotal.sub(u.quoteTokenFree))}),Object(W.jsx)(Re.a,{align:"center",children:et(m,u.quoteTokenFree)}),Object(W.jsx)(Re.a,{align:"center",children:Object(W.jsx)(v.a,{color:"primary",disabled:k,onClick:M,children:"Settle"})}),Object(W.jsx)(Re.a,{align:"center",children:Object(W.jsx)(v.a,{color:"secondary",disabled:C,onClick:T,children:"Close"})})]},o.toString())}function et(e,t){return e?(t.toNumber()/Math.pow(10,e.decimals)).toFixed(e.decimals):t.toNumber().toString()}var tt=n(411),nt=Object(k.a)((function(e){return{infoLabel:{marginTop:"10px",marginBottom:"10px",display:"flex",justifyContent:"space-between",marginLeft:"5px",marginRight:"5px"},fairPriceLabel:{marginRight:"10px",display:"flex",justifyContent:"center",flexDirection:"column",color:e.palette.text.secondary},infoButton:{padding:0}}}));function rt(){var e=nt(),t=Z(),n=t.fromMint,r=t.toMint,o=oe(n),i=$(),a=z(),c=a.get(n.toString()),s=a.get(r.toString());return Object(W.jsxs)("div",{className:e.infoLabel,children:[Object(W.jsx)(S.a,{color:"textSecondary"}),Object(W.jsxs)("div",{style:{display:"flex"},children:[Object(W.jsx)("div",{className:e.fairPriceLabel,children:void 0!==i&&s&&c?"1 ".concat(s.symbol," = ").concat(i.toFixed(null===o||void 0===o?void 0:o.decimals)," ").concat(c.symbol):"-"}),Object(W.jsx)(ot,{})]})]})}function ot(){var e=nt();return Object(W.jsx)(Ve.a,{variant:"popover",children:function(t){return Object(W.jsxs)("div",{style:{display:"flex"},children:[Object(W.jsx)(Me.a,Object(Se.a)(Object(Se.a)({},Object(Ge.bindTrigger)(t)),{},{className:e.infoButton,children:Object(W.jsx)(tt.a,{})})),Object(W.jsx)(Te.a,Object(Se.a)(Object(Se.a)({},Object(Ge.bindPopover)(t)),{},{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{borderRadius:"10px"}},disableRestoreFocus:!0,children:Object(W.jsx)(it,{})}))]})}})}function it(){var e,t,n=Z(),r=n.fromMint,o=n.toMint,i=G().swapClient,a=z(),c=[{ticker:null===(e=a.get(r.toString()))||void 0===e?void 0:e.symbol,mint:r},{ticker:null===(t=a.get(o.toString()))||void 0===t?void 0:t.symbol,mint:o}],s=i.route(r,o);return Object(W.jsxs)("div",{style:{padding:"15px",width:"250px"},children:[Object(W.jsxs)("div",{children:[Object(W.jsx)(S.a,{color:"textSecondary",style:{fontWeight:"bold",marginBottom:"5px"},children:"Trade Route"}),s?s.map((function(e){return Object(W.jsx)(at,{market:e},e.toString())})):Object(W.jsx)(S.a,{color:"textSecondary",children:"Route not found"})]}),Object(W.jsxs)("div",{style:{marginTop:"15px"},children:[Object(W.jsx)(S.a,{color:"textSecondary",style:{fontWeight:"bold",marginBottom:"5px"},children:"Tokens"}),c.map((function(e){return Object(W.jsxs)("div",{style:{marginTop:"5px",display:"flex",justifyContent:"space-between"},children:[Object(W.jsx)(qe.a,{href:"https://explorer.solana.com/address/".concat(e.mint.toString()),target:"_blank",rel:"noopener",children:e.ticker}),Object(W.jsx)("code",{style:{width:"128px",overflow:"hidden"},children:e.mint.toString()})]},e.mint.toString())}))]})]})}function at(e){var t=e.market,n=function(e){var t,n,r=z(),o=H(e),i=o?null===(t=r.get(null===o||void 0===o?void 0:o.baseMintAddress.toString()))||void 0===t?void 0:t.symbol:"-",a=o?null===(n=r.get(null===o||void 0===o?void 0:o.quoteMintAddress.toString()))||void 0===n?void 0:n.symbol:"-";return"".concat(i," / ").concat(a)}(t),r=J(t);return Object(W.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"5px"},children:[Object(W.jsx)(qe.a,{href:"https://dex.projectserum.com/#/market/".concat(t.toString()),target:"_blank",rel:"noopener",children:n}),Object(W.jsx)("code",{style:{marginLeft:"10px"},children:r?r.toFixed(6):"-"})]})}var ct=Object(k.a)((function(){return{card:{width:"450px",borderRadius:"10px",border:"solid 1pt #e0e0e0"},cardContent:{marginLeft:"6px",marginRight:"6px",marginBottom:"6px"},tab:{width:"50%"},settingsButton:{padding:0},swapButton:{width:"100%",borderRadius:"15px"},swapToFromButton:{display:"block",marginLeft:"auto",marginRight:"auto"}}}));function st(e){var t=e.style,n=ct();return Object(W.jsx)("div",{style:t,children:Object(W.jsxs)(C.a,{className:n.card,children:[Object(W.jsx)(lt,{}),Object(W.jsxs)("div",{className:n.cardContent,children:[Object(W.jsx)(dt,{}),Object(W.jsx)(ut,{}),Object(W.jsx)(bt,{}),Object(W.jsx)(rt,{}),Object(W.jsx)(mt,{})]})]})})}function lt(){return Object(W.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",margin:"8px"},children:[Object(W.jsx)(S.a,{style:{fontWeight:"bold",display:"flex",justifyContent:"center",flexDirection:"column"},children:"Swap"}),Object(W.jsx)(Je,{})]})}function ut(){var e=ct(),t=Z().swapToFromMints;return Object(W.jsx)(v.a,{className:e.swapToFromButton,onClick:t,children:"\u21c5"})}function dt(){var e=Z(),t=e.fromMint,n=e.setFromMint,r=e.fromAmount,o=e.setFromAmount;return Object(W.jsx)(pt,{mint:t,setMint:n,amount:r,setAmount:o})}function bt(){var e=Z(),t=e.toMint,n=e.setToMint,r=e.toAmount,o=e.setToAmount;return Object(W.jsx)(pt,{mint:t,setMint:n,amount:r,setAmount:o})}function pt(e){var t=e.mint,n=e.setMint,o=e.amount,i=e.setAmount,a=Object(r.useState)(!1),c=Object(x.a)(a,2),s=c[0],l=c[1],u=pe(t),d=oe(t);return Object(W.jsxs)(M.a,{elevation:0,variant:"outlined",style:{borderRadius:"10px"},children:[Object(W.jsxs)("div",{style:{height:"50px",display:"flex",justifyContent:"space-between"},children:[Object(W.jsx)(jt,{mint:t,onClick:function(){return l(!0)}}),Object(W.jsx)(T.a,{type:"number",value:o,onChange:function(e){return i(parseFloat(e.target.value))},style:{display:"flex",justifyContent:"center",flexDirection:"column"}})]}),Object(W.jsx)("div",{style:{marginLeft:"10px",height:"30px"},children:Object(W.jsx)(S.a,{color:"textSecondary",style:{fontSize:"14px"},children:u&&d?"Balance: ".concat((u.account.amount.toNumber()/Math.pow(10,d.decimals)).toFixed(d.decimals)):"-"})}),Object(W.jsx)(ye,{setMint:n,open:s,onClose:function(){return l(!1)}})]})}function jt(e){var t=e.mint,n=e.onClick;return Object(W.jsxs)(v.a,{onClick:n,style:{minWidth:"116px"},children:[Object(W.jsx)(ft,{mint:t,style:{width:"25px",borderRadius:"13px"}}),Object(W.jsx)(xt,{mint:t}),Object(W.jsx)(A.a,{})]})}function ft(e){var t=e.mint,n=e.style,r=z().get(t.toString());return Object(W.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:(null===r||void 0===r?void 0:r.logoURI)?Object(W.jsx)("img",{alt:"Logo",style:n,src:null===r||void 0===r?void 0:r.logoURI}):Object(W.jsx)("div",{style:n})})}function xt(e){var t=e.mint,n=z().get(t.toString());return Object(W.jsx)(S.a,{style:{marginLeft:"5px"},children:null===n||void 0===n?void 0:n.symbol})}function mt(){var e=ct(),t=Z(),n=t.fromMint,r=t.toMint,o=t.fromAmount,i=t.toAmount,a=t.slippage,c=t.isClosingNewAccounts,u=G().swapClient,d=oe(n),b=oe(r),p=V(),j=Q(n,r),f=H(j?j[0]:void 0),x=H(j?j[1]:void 0),m=function(){var e=Object(l.a)(s.a.mark((function e(){var t,l,j,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d&&b){e.next=2;break}throw new Error("Unable to calculate mint decimals");case 2:return t=new O.BN(o).muln(Math.pow(10,d.decimals)),l=new O.BN(i*Math.pow(10,b.decimals)).muln(100-a).divn(100),j=f?p.get(null===f||void 0===f?void 0:f.address.toString()):void 0,m=x?p.get(null===x||void 0===x?void 0:x.address.toString()):void 0,e.next=8,u.swap({fromMint:n,toMint:r,amount:t,minExpectedSwapAmount:l,fromMarket:f,toMarket:x,fromOpenOrders:j?j[0].address:void 0,toOpenOrders:m?m[0].address:void 0,close:c});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(W.jsx)(v.a,{variant:"contained",className:e.swapButton,onClick:m,disabled:null===u.program.provider.wallet.publicKey||null===j,children:"Swap"})}var vt=function(e){var t=e.style,n=e.provider,r=e.tokenList,o=new y.Swap(n,r);return Object(W.jsx)(I,{tokenList:r,children:Object(W.jsx)(re,{provider:n,children:Object(W.jsx)(be,{provider:n,children:Object(W.jsx)(_,{swapClient:o,children:Object(W.jsx)(Y,{children:Object(W.jsx)(st,{style:t})})})})})})};n(348);function Ot(){var e=Object(m.b)().enqueueSnackbar,t=Object(r.useState)(!1),n=Object(x.a)(t,2),o=n[0],i=n[1],a=Object(r.useState)(null),c=Object(x.a)(a,2),s=c[0],l=c[1],u=Object(r.useMemo)((function(){var t={preflightCommitment:"recent",commitment:"recent"},n="https://solana-api.projectserum.com",r=new h.a("https://www.sollet.io",n),o=new g.Connection(n,t.preflightCommitment);return[new ht(o,r,t,(function(t,n){n?e("Error: ".concat(n.toString()),{variant:"error"}):e("Transaction sent",{variant:"success",action:Object(W.jsx)(v.a,{color:"inherit",component:"a",target:"_blank",rel:"noopener",href:"https://explorer.solana.com/tx/".concat(t),children:"View on Solana Explorer"})})})),r]}),[e]),d=Object(x.a)(u,2),b=d[0],p=d[1];return Object(r.useEffect)((function(){(new w.a).resolve().then(l)}),[l]),Object(r.useEffect)((function(){p.on("connect",(function(){e("Wallet connected",{variant:"success"}),i(!0)})),p.on("disconnect",(function(){e("Wallet disconnected",{variant:"info"}),i(!1)}))}),[p,e]),Object(W.jsxs)("div",{style:{width:"450px",marginLeft:"auto",marginRight:"auto",position:"absolute",left:0,right:0,top:0,bottom:0,display:"flex",justifyContent:"center",flexDirection:"column"},children:[Object(W.jsx)(v.a,{variant:"outlined",onClick:function(){return o?p.disconnect():p.connect()},style:{position:"fixed",right:24,top:24},children:o?"Disconnect":"Connect"}),s&&Object(W.jsx)(vt,{provider:b,tokenList:s})]})}var ht=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(e,r,o,i){var a;return Object(u.a)(this,n),(a=t.call(this,e,r,o)).onTransaction=void 0,a.onTransaction=i,a}return Object(d.a)(n,[{key:"send",value:function(){var e=Object(l.a)(s.a.mark((function e(t,r,o){var i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b.a)(Object(p.a)(n.prototype),"send",this).call(this,t,r,o);case 3:return i=e.sent,this.onTransaction(i),e.abrupt("return",i);case 8:throw e.prev=8,e.t0=e.catch(0),this.onTransaction(void 0,e.t0),e.t0;case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(O.Provider),gt=function(){return Object(W.jsx)(m.a,{maxSnack:5,autoHideDuration:8e3,children:Object(W.jsx)(Ot,{})})},wt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,423)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),o(e),i(e),a(e)}))};a.a.render(Object(W.jsx)(o.a.StrictMode,{children:Object(W.jsx)(gt,{})}),document.getElementById("root")),wt()}},[[349,1,2]]]);
//# sourceMappingURL=main.035da4e0.chunk.js.map