(this["webpackJsonpswap-ui"]=this["webpackJsonpswap-ui"]||[]).push([[0],{228:function(t,e,n){},229:function(t,e){},230:function(t,e){},232:function(t,e){},254:function(t,e){},255:function(t,e){},275:function(t,e){},284:function(t,e){},285:function(t,e){},289:function(t,e){},290:function(t,e){},303:function(t,e){},305:function(t,e){},322:function(t,e){},340:function(t,e,n){},341:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),c=n(29),i=n.n(c),a=(n(228),n(19)),s=n(215),u=n(70),l=n(200),d=n(7),j=n(212),b=n(2),p=n.n(b),f=n(6),x=n(202),m=n(371),h=n(391),O=n(383),v=n(342),g=n(396),w=n(392),y=n(393),C=n(9),k=new d.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),S=new d.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),M=new d.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),T=o.a.createContext(null);function A(t){var e=t.swapClient,n=Object(r.useState)(k),o=Object(a.a)(n,2),c=o[0],i=o[1],s=Object(r.useState)(S),u=Object(a.a)(s,2),l=u[0],d=u[1],j=Object(r.useState)(0),b=Object(a.a)(j,2),p=b[0],f=b[1],x=Object(r.useState)(0),m=Object(a.a)(x,2),h=m[0],O=m[1],v=Object(r.useState)(.5),g=Object(a.a)(v,2),w=g[0],y=g[1];return Object(C.jsx)(T.Provider,{value:{swapClient:e,fromMint:c,setFromMint:i,toMint:l,setToMint:d,fromAmount:p,setFromAmount:function(t){f(t)},toAmount:h,setToAmount:function(t){O(t)},swapToFromMints:function(){var t=c,e=p,n=h;i(l),d(t),f(n),O(e)},slippage:w,setSlippage:y},children:t.children})}function P(){var t=Object(r.useContext)(T);if(null===t)throw new Error("Context not available");return t}var F=n(21),K=n(120),R=n(71),E=new d.PublicKey("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),B=o.a.createContext(null);function L(t){var e=Object(r.useState)(new Map),n=Object(a.a)(e,2),o=n[0],c=n[1],i=Object(r.useState)(new Map),s=Object(a.a)(i,2),l=s[0],j=s[1],b=t.provider;return Object(r.useEffect)((function(){R.OpenOrders.findForOwner(b.connection,b.wallet.publicKey,E).then(function(){var t=Object(f.a)(p.a.mark((function t(e){var n,r,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=new Map,r=new Set,e.forEach((function(t){r.add(t.market.toString()),n.get(t.market.toString())?n.get(t.market.toString()).push(t):n.set(t.market.toString(),[t])})),!(r.size>100)){t.next=5;break}throw new Error("Too many markets. Please file an issue to update this");case 5:return t.next=7,u.utils.getMultipleAccounts(b.connection,Object(F.a)(r).map((function(t){return new d.PublicKey(t)})));case 7:o=t.sent.map((function(t){return{publicKey:null===t||void 0===t?void 0:t.publicKey,account:new R.Market(R.Market.getLayout(E).decode(null===t||void 0===t?void 0:t.account.data),-1,-1,b.opts,E)}})),j((function(t){var e=new Map(t);return o.forEach((function(t){e.set(t.publicKey.toString(),t.account)})),e})),c(n);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[b.connection,b.wallet.publicKey,b.opts]),Object(C.jsx)(B.Provider,{value:{openOrders:o,marketCache:l,setMarketCache:j,provider:b},children:t.children})}var N=n(77),D=o.a.createContext(null);function q(t){var e=t.provider,n=Object(r.useState)(new Map),o=Object(a.a)(n,2),c=o[0],i=o[1];return Object(C.jsx)(D.Provider,{value:{mintCache:c,setMintCache:i,provider:e},children:t.children})}function I(t){var e=Object(r.useContext)(D);if(null===e)throw new Error("Mint context not found");var n=Object(K.a)(Object(f.a)(p.a.mark((function n(){var r,o,c;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return",void 0);case 2:if(!e.mintCache.get(t.toString())){n.next=4;break}return n.abrupt("return",e.mintCache.get(t.toString()));case 4:return r=new N.Token(e.provider.connection,t,N.TOKEN_PROGRAM_ID,new d.Account),n.next=7,r.getMintInfo();case 7:return o=n.sent,(c=new Map(e.mintCache)).set(t.toString(),o),e.setMintCache(c),n.abrupt("return",o);case 12:case"end":return n.stop()}}),n)}))),[e.provider.connection,t]);if(n.result)return n.result}var z=o.a.createContext(null);function W(t){return Object(C.jsx)(z.Provider,{value:{tokenList:t.tokenList},children:t.children})}function U(){var t=Object(r.useContext)(z);if(null===t)throw new Error("Context not available");return t.tokenList.getList()}var G=n(3),_=n(23);function H(){return(H=Object(f.a)(p.a.mark((function t(e,n){var r,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=V(n),t.next=3,e._rpcRequest("getProgramAccounts",[N.TOKEN_PROGRAM_ID.toBase58(),{commitment:e.commitment,filters:r}]);case 3:if(!(o=t.sent).error){t.next=6;break}throw new Error("failed to get token accounts owned by "+n.toBase58()+": "+o.error.message);case 6:return t.abrupt("return",o.result.map((function(t){var e=t.pubkey,n=t.account,r=n.data,o=n.executable,c=n.owner,i=n.lamports;return{publicKey:new d.PublicKey(e),accountInfo:{data:_.decode(r),executable:o,owner:new d.PublicKey(c),lamports:i}}})).filter((function(t){var e=t.accountInfo;return r.every((function(t){if(t.dataSize)return e.data.length===t.dataSize;if(t.memcmp){var n=_.decode(t.memcmp.bytes);return e.data.slice(t.memcmp.offset,t.memcmp.offset+n.length).equals(n)}return!1}))})).map((function(t){return{publicKey:t.publicKey,account:Q(t.accountInfo.data)}})));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var J=G.struct([G.blob(32,"mint"),G.blob(32,"owner"),G.nu64("amount"),G.blob(93)]);G.struct([G.blob(44),G.u8("decimals"),G.blob(37)]);function Q(t){var e=J.decode(t),n=e.mint,r=e.owner,o=e.amount;return{mint:new d.PublicKey(n),owner:new d.PublicKey(r),amount:new u.BN(o)}}function V(t){return[{memcmp:{offset:J.offsetOf("owner"),bytes:t.toBase58()}},{dataSize:J.span}]}var X=o.a.createContext(null);function Y(t){var e=t.provider,n=Object(r.useState)(void 0),o=Object(a.a)(n,2),c=o[0],i=o[1];return Object(r.useEffect)((function(){(function(t,e){return H.apply(this,arguments)})(e.connection,e.wallet.publicKey).then(i)}),[e.wallet.publicKey,e.connection]),Object(C.jsx)(X.Provider,{value:{ownedTokenAccounts:c},children:t.children})}var Z=n(397),$=n(375),tt=n(376),et=n(379),nt=n(343),rt=Object(m.a)((function(t){return{dialogContent:{paddingTop:0},textField:{width:"100%",border:"solid 1pt #ccc",borderRadius:"10px",marginBottom:"8px"}}}));function ot(t){var e=t.open,n=t.onClose,o=t.setMint,c=Object(r.useState)(""),i=Object(a.a)(c,2),s=i[0],u=i[1],l=rt(),d=P().swapClient;return Object(C.jsx)(Z.a,{open:e,onClose:n,PaperProps:{style:{borderRadius:"10px"}},children:Object(C.jsxs)("div",{style:{width:"420px"},children:[Object(C.jsx)($.a,{style:{fontWeight:"bold"},children:"Select a token"}),Object(C.jsxs)(tt.a,{className:l.dialogContent,children:[Object(C.jsx)(g.a,{className:l.textField,placeholder:"Search name",value:s,onChange:function(t){return u(t.target.value)},InputProps:{disableUnderline:!0,style:{padding:"10px"}}}),Object(C.jsx)("div",{children:Object(C.jsx)(et.a,{disablePadding:!0,children:d.tokens().concat([S,M]).map((function(t){return Object(C.jsx)(ct,{mint:t,onClick:function(t){o(t),n()}},t.toString())}))})})]})]})})}function ct(t){var e=t.mint,n=t.onClick;return Object(C.jsxs)(nt.a,{button:!0,onClick:function(){return n(e)},children:[Object(C.jsx)(Dt,{mint:e,style:{width:"30px",borderRadius:"15px"}}),Object(C.jsx)(it,{mint:e})]})}function it(t){var e=t.mint,n=U().filter((function(t){return t.address===e.toString()}))[0];return Object(C.jsxs)("div",{style:{marginLeft:"16px"},children:[Object(C.jsx)(s.a,{style:{fontWeight:"bold"},children:n.symbol}),Object(C.jsx)(s.a,{color:"textSecondary",style:{fontSize:"14px"},children:n.name})]})}var at=n(25),st=n(380),ut=n(399),lt=n(382),dt=n(384),jt=n(385),bt=n(386),pt=n(387),ft=n(388),xt=n(389),mt=n(394),ht=n(390),Ot=n(381),vt=n(132),gt=n.n(vt),wt=Object(m.a)((function(){return{tab:{width:"50%"},table:{},settingsButton:{padding:0}}}));function yt(){var t=wt(),e=P(),n=e.slippage,o=e.setSlippage,c=Object(r.useState)(!1),i=Object(a.a)(c,2),u=i[0],l=i[1];return Object(C.jsx)(gt.a,{variant:"popover",children:function(e){return Object(C.jsxs)("div",{children:[Object(C.jsx)(st.a,Object(at.a)(Object(at.a)({},Object(vt.bindTrigger)(e)),{},{className:t.settingsButton,children:Object(C.jsx)(Ot.a,{})})),Object(C.jsx)(ut.a,Object(at.a)(Object(at.a)({},Object(vt.bindPopover)(e)),{},{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{borderRadius:"10px"}},children:Object(C.jsxs)("div",{style:{padding:"15px",width:"305px"},children:[Object(C.jsx)(s.a,{color:"textSecondary",style:{fontWeight:"bold"},children:"Settings"}),Object(C.jsxs)("div",{style:{marginTop:"10px"},children:[Object(C.jsx)(s.a,{children:"Slippage tolerance"}),Object(C.jsx)(g.a,{type:"number",placeholder:"Error tolerance percentage",value:n,onChange:function(t){return o(parseFloat(t.target.value))},style:{display:"flex",justifyContent:"center",flexDirection:"column"},InputProps:{endAdornment:Object(C.jsx)(lt.a,{position:"end",children:"%"})}}),Object(C.jsx)(O.a,{style:{width:"100%",marginTop:"10px",background:"#e0e0e0"},onClick:function(){return l(!0)},children:"Manage Dex Accounts"})]}),Object(C.jsx)(Ct,{open:u,onClose:function(){return l(!1)}})]})}))]})}})}function Ct(t){var e=t.open,n=t.onClose;return Object(C.jsx)(Z.a,{maxWidth:"lg",open:e,onClose:n,PaperProps:{style:{borderRadius:"10px"}},children:Object(C.jsx)("div",{children:Object(C.jsx)(tt.a,{style:{paddingTop:0},children:Object(C.jsx)(kt,{})})})})}function kt(){var t=wt(),e=function(){var t=Object(r.useContext)(B);if(null===t)throw new Error("Context not available");return t.openOrders}();return Object(C.jsx)(dt.a,{component:v.a,elevation:0,children:Object(C.jsxs)(jt.a,{className:t.table,"aria-label":"simple table",children:[Object(C.jsx)(bt.a,{children:Object(C.jsxs)(pt.a,{children:[Object(C.jsx)(ft.a,{children:"Market"}),Object(C.jsx)(ft.a,{align:"right",children:"Base Used"}),Object(C.jsx)(ft.a,{align:"right",children:"Base Free"}),Object(C.jsx)(ft.a,{align:"right",children:"Quote Used"}),Object(C.jsx)(ft.a,{align:"right",children:"Quote Free"}),Object(C.jsx)(ft.a,{align:"right",children:"Open Orders Account"}),Object(C.jsx)(ft.a,{align:"right",children:"Action"})]})}),Object(C.jsx)(xt.a,{children:Array.from(e.entries()).map((function(t){var e=Object(a.a)(t,2),n=e[0],r=e[1];return Object(C.jsx)(St,{market:new d.PublicKey(n),openOrders:r},n)}))})]})})}function St(t){var e=t.market,n=t.openOrders,o=Object(r.useState)(n[0]),c=Object(a.a)(o,2),i=c[0],s=c[1],u=function(t){var e=Object(r.useContext)(B);if(null===e)throw new Error("Context not available");var n=Object(K.a)(Object(f.a)(p.a.mark((function n(){var r,o;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.marketCache.get(t.toString())){n.next=2;break}return n.abrupt("return",e.marketCache.get(t.toString()));case 2:return n.next=4,R.Market.load(e.provider.connection,t,void 0,E);case 4:return r=n.sent,(o=new Map(e.marketCache)).set(t.toString(),r),e.setMarketCache(o),n.abrupt("return",r);case 9:case"end":return n.stop()}}),n)}))),[e.provider.connection,t]);if(n.result)return n.result}(e),l=U(),d=I(null===u||void 0===u?void 0:u.baseMintAddress),j=I(null===u||void 0===u?void 0:u.quoteMintAddress),b=l.filter((function(t){return t.address===(null===u||void 0===u?void 0:u.baseMintAddress.toString())})).map((function(t){return t.symbol}))[0],x=l.filter((function(t){return t.address===(null===u||void 0===u?void 0:u.quoteMintAddress.toString())})).map((function(t){return t.symbol}))[0],m=b&&x?"".concat(b," / ").concat(x):e.toString(),h=i.baseTokenTotal.toNumber()+i.quoteTokenTotal.toNumber()!==0,v=function(){var t=Object(f.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(C.jsxs)(pt.a,{children:[Object(C.jsx)(ft.a,{component:"th",scope:"row",children:m}),Object(C.jsx)(ft.a,{align:"right",children:Mt(d,i.baseTokenTotal.sub(i.baseTokenFree))}),Object(C.jsx)(ft.a,{align:"right",children:Mt(d,i.baseTokenFree)}),Object(C.jsx)(ft.a,{align:"right",children:Mt(j,i.quoteTokenTotal.sub(i.quoteTokenFree))}),Object(C.jsx)(ft.a,{align:"right",children:Mt(j,i.quoteTokenFree)}),Object(C.jsx)(ft.a,{align:"right",children:Object(C.jsx)(mt.a,{value:i.address.toString(),onChange:function(t){return s(n.filter((function(e){return e.address.toString()===t.target.value}))[0])},children:n.map((function(t){return Object(C.jsx)(ht.a,{value:t.address.toString(),children:t.address.toString()})}))})}),Object(C.jsx)(ft.a,{align:"right",children:Object(C.jsx)(O.a,{color:"secondary",disabled:h,onClick:v,children:"Close"})})]},e.toString())}function Mt(t,e){return t?(e.toNumber()/Math.pow(10,t.decimals)).toFixed(t.decimals):e.toNumber().toString()}var Tt=Object(m.a)((function(){return{card:{width:"450px",borderRadius:"10px",border:"solid 1pt #e0e0e0"},cardContent:{marginLeft:"6px",marginRight:"6px",marginBottom:"6px"},tab:{width:"50%"},settingsButton:{padding:0},swapButton:{width:"100%",borderRadius:"15px"},swapToFromButton:{display:"block",marginLeft:"auto",marginRight:"auto"},auxilliaryLabel:{marginTop:"10px",marginBottom:"10px",display:"flex",justifyContent:"space-between",marginLeft:"5px",marginRight:"5px"}}}));function At(t){var e=t.style,n=t.provider,r=t.tokenList,o=new x.Swap(n,r);return Object(C.jsx)(W,{tokenList:r,children:Object(C.jsx)(q,{provider:n,children:Object(C.jsx)(Y,{provider:n,children:Object(C.jsx)(L,{provider:n,children:Object(C.jsx)(A,{swapClient:o,children:Object(C.jsx)(Pt,{style:e})})})})})})}function Pt(t){var e=t.style,n=Tt();return Object(C.jsx)("div",{style:e,children:Object(C.jsxs)(h.a,{className:n.card,children:[Object(C.jsx)(Ft,{}),Object(C.jsxs)("div",{className:n.cardContent,children:[Object(C.jsx)(Et,{}),Object(C.jsx)(Rt,{}),Object(C.jsx)(Bt,{}),Object(C.jsx)(Kt,{}),Object(C.jsx)(It,{})]})]})})}function Ft(){return Object(C.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",margin:"8px"},children:[Object(C.jsx)(s.a,{style:{fontWeight:"bold",display:"flex",justifyContent:"center",flexDirection:"column"},children:"Swap"}),Object(C.jsx)(yt,{})]})}function Kt(){var t=Tt(),e=P(),n=e.fromMint,r=e.toMint,o=e.fromAmount,c=e.toAmount,i=(o/c).toFixed(6),a=U(),u=a.filter((function(t){return t.address===n.toString()}))[0],l=a.filter((function(t){return t.address===r.toString()}))[0];return Object(C.jsxs)("div",{className:t.auxilliaryLabel,children:[Object(C.jsx)(s.a,{color:"textSecondary"}),Object(C.jsxs)("div",{style:{display:"flex"},children:[Object(C.jsx)("div",{style:{marginRight:"10px",display:"flex",justifyContent:"center",flexDirection:"column"},children:0!==o&&0!==c?"1 ".concat(l.symbol," = ").concat(i," ").concat(u.symbol):"-"}),Object(C.jsx)(w.a,{})]})]})}function Rt(){var t=Tt(),e=P().swapToFromMints;return Object(C.jsx)(O.a,{className:t.swapToFromButton,onClick:e,children:"\u21c5"})}function Et(){var t=P(),e=t.fromMint,n=t.setFromMint,r=t.fromAmount,o=t.setFromAmount;return Object(C.jsx)(Lt,{mint:e,setMint:n,amount:r,setAmount:o})}function Bt(){var t=P(),e=t.toMint,n=t.setToMint,r=t.toAmount,o=t.setToAmount;return Object(C.jsx)(Lt,{mint:e,setMint:n,amount:r,setAmount:o})}function Lt(t){var e=t.mint,n=t.setMint,o=t.amount,c=t.setAmount,i=Object(r.useState)(!1),u=Object(a.a)(i,2),l=u[0],d=u[1],j=function(t){var e=Object(r.useContext)(X);if(null===e)throw new Error("Context not available");if(void 0!==e.ownedTokenAccounts){var n=e.ownedTokenAccounts.filter((function(e){return e.account.mint.equals(t)}));return 0===n.length?null:(n.sort((function(t,e){return t.account.amount<e.account.amount?-1:t.account.amount>e.account.amount?1:0})),n[0])}}(e),b=I(e);return Object(C.jsxs)(v.a,{elevation:0,variant:"outlined",style:{borderRadius:"10px"},children:[Object(C.jsxs)("div",{style:{height:"50px",display:"flex",justifyContent:"space-between"},children:[Object(C.jsx)(Nt,{mint:e,onClick:function(){return d(!0)}}),Object(C.jsx)(g.a,{type:"number",value:o,onChange:function(t){return c(parseFloat(t.target.value))},style:{display:"flex",justifyContent:"center",flexDirection:"column"}})]}),Object(C.jsx)("div",{style:{marginLeft:"10px",height:"30px"},children:Object(C.jsx)(s.a,{color:"textSecondary",style:{fontSize:"14px"},children:j&&b?"Balance: ".concat((j.account.amount.toNumber()/Math.pow(10,b.decimals)).toFixed(b.decimals)):"-"})}),Object(C.jsx)(ot,{setMint:n,open:l,onClose:function(){return d(!1)}})]})}function Nt(t){var e=t.mint,n=t.onClick;return Object(C.jsxs)(O.a,{onClick:n,style:{width:"116px"},children:[Object(C.jsx)(Dt,{mint:e,style:{width:"25px",borderRadius:"13px"}}),Object(C.jsx)(qt,{mint:e}),Object(C.jsx)(y.a,{})]})}function Dt(t){var e=t.mint,n=t.style,r=U().filter((function(t){return t.address===e.toString()}))[0];return Object(C.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:r.logoURI?Object(C.jsx)("img",{alt:"token logo",style:n,src:r.logoURI}):Object(C.jsx)("div",{style:n})})}function qt(t){var e=t.mint,n=U().filter((function(t){return t.address===e.toString()}))[0];return Object(C.jsx)(s.a,{style:{marginLeft:"5px"},children:n.symbol})}function It(){var t=Tt(),e=P(),n=(e.fromMint,e.toMint,e.fromAmount,e.slippage,function(){var t=Object(f.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("sending swap");case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());return Object(C.jsx)(O.a,{variant:"contained",className:t.swapButton,onClick:n,children:"Swap"})}n(340);var zt=function(){var t=Object(r.useState)(null),e=Object(a.a)(t,2),n=e[0],o=e[1],c=Object(r.useState)(!1),i=Object(a.a)(c,2),b=i[0],p=i[1];return Object(r.useEffect)((function(){var t={preflightCommitment:"recent",commitment:"recent"},e="https://solana-api.projectserum.com",n=new l.a("https://www.sollet.io",e),r=new d.Connection(e,t.preflightCommitment),c=new u.Provider(r,n,t);(new j.a).resolve().then((function(t){o({provider:c,tokenList:t}),n.connect()}))}),[o]),Object(r.useEffect)((function(){null!==n&&(n.provider.wallet.on("connect",(function(){p(!0)})),n.provider.wallet.connect())}),[n]),Object(C.jsx)("div",{style:{width:"450px",marginLeft:"auto",marginRight:"auto",position:"absolute",left:0,right:0,top:0,bottom:0,display:"flex",justifyContent:"center",flexDirection:"column"},children:b?Object(C.jsx)(At,{provider:n.provider,tokenList:n.tokenList}):Object(C.jsx)(s.a,{style:{textAlign:"center"},children:"Disconnected"})})},Wt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,401)).then((function(e){var n=e.getCLS,r=e.getFID,o=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),r(t),o(t),c(t),i(t)}))};i.a.render(Object(C.jsx)(o.a.StrictMode,{children:Object(C.jsx)(zt,{})}),document.getElementById("root")),Wt()}},[[341,1,2]]]);
//# sourceMappingURL=main.0bbfd0c9.chunk.js.map