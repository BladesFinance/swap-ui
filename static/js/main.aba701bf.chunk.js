(this["webpackJsonp@project-serum/swap-ui"]=this["webpackJsonp@project-serum/swap-ui"]||[]).push([[0],{236:function(e,t,n){},241:function(e,t){},242:function(e,t){},244:function(e,t){},266:function(e,t){},267:function(e,t){},287:function(e,t){},296:function(e,t){},297:function(e,t){},301:function(e,t){},302:function(e,t){},315:function(e,t){},317:function(e,t){},334:function(e,t){},348:function(e,t,n){},349:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(29),i=n.n(a),c=(n(236),n(2)),s=n.n(c),u=n(5),l=n(14),d=n(20),p=n(138),b=n(52),j=n(35),f=n(36),v=n(17),m=n(167),x=n(405),h=n(42),O=n(212),g=n(8),w=n(219),y=n(214),k=n(16),S=new g.PublicKey("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),C=new g.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),M=new g.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),T=new g.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),A=new g.PublicKey("6a9wpsZpZGxGhFVSQBpcTNjNjytdbSA1iUw1A5KNDxPw"),P=new g.PublicKey("FVsXUnbhifqJ4LiXQEbpUtXVdB8T5ADLKqSs5t1oc54F"),F=new g.PublicKey("6nGMps9VfDjkKEwYjdSNqN1ToXkLae4VsN49fzBiDFBd"),N=new g.PublicKey("9w97GdWUYYaamGwdKMKZgGzPduZJkiFizq4rz5CPXRv2"),K=new g.PublicKey("4v6e6vNXAaEunrvbqkYnKwbaWfck8a2KVR4uRAVXxVwC"),B=n(22),E=n(69),L=n(75),R=n(7),W=o.a.createContext(null),q="wrapped-sollet",D="wormhole";function I(e){var t=Object(r.useMemo)((function(){return e.tokenList.filterByClusterSlug("mainnet-beta").getList()}),[e.tokenList]),n=Object(r.useMemo)((function(){var e=new Map;return t.forEach((function(t){e.set(t.address,t)})),e}),[t]),o=Object(r.useMemo)((function(){var e=t.filter((function(e){var t,n,r=(null===(t=e.extensions)||void 0===t?void 0:t.serumV3Usdt)||(null===(n=e.extensions)||void 0===n?void 0:n.serumV3Usdc),o="So11111111111111111111111111111111111111112"===e.address;return r&&!o})).concat([n.get(M.toString()),n.get(T.toString())]);return e.sort((function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0})),e}),[t,n]),a=Object(r.useMemo)((function(){var e=t.filter((function(e){var t;return null===(t=e.tags)||void 0===t?void 0:t.includes(q)}));return e.sort((function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0})),[e,new Map(e.map((function(e){return[e.address,e]})))]}),[t]),i=Object(v.a)(a,2),c=i[0],s=i[1],u=Object(r.useMemo)((function(){var e=t.filter((function(e){var t;return null===(t=e.tags)||void 0===t?void 0:t.includes(D)}));return e.sort((function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0})),[e,new Map(e.map((function(e){return[e.address,e]})))]}),[t]),l=Object(v.a)(u,2),d=l[0],p=l[1];return Object(R.jsx)(W.Provider,{value:{tokenMap:n,wormholeMap:p,solletMap:s,swappableTokens:o,swappableTokensWormhole:d,swappableTokensSollet:c},children:e.children})}function z(){var e=Object(r.useContext)(W);if(null===e)throw new Error("Context not available");return e}function G(){return z().tokenMap}var U=n(25),V=n(77);function X(e){return _.apply(this,arguments)}function _(){return(_=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(n=te.get(t.toString()))){e.next=3;break}return e.abrupt("return",n);case 3:return e.next=5,J("GET","coins/sol/".concat(t.toString()));case 5:return r=e.sent,n=Object(U.a)(Object(U.a)({},r),{},{splMint:new g.PublicKey(r.splMint)}),te.set(t.toString(),n),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t,n,r,o){return Z.apply(this,arguments)}function Z(){return(Z=Object(u.a)(s.a.mark((function e(t,n,r,o,a){var i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(i=ne.get(o.toString()))){e.next=3;break}return e.abrupt("return",i);case 3:return e.next=5,t.getAccountInfo(o);case 5:if(null!==e.sent){e.next=13;break}return ne.set(o.toString(),!1),J("POST","wormhole/pool/".concat(a.ticker,"/").concat(o.toString(),"/").concat(n.toString(),"/").concat(r.toString())).catch(console.error),e.abrupt("return",!1);case 13:return ne.set(o.toString(),!0),e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t,n){return Q.apply(this,arguments)}function Q(){return(Q=Object(u.a)(s.a.mark((function e(t,n,r){var o,a,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:o={},method:t},"GET"===t?a.cache="no-cache":r&&(o["Content-Type"]="application/json",a.body=JSON.stringify(r)),e.next=5,fetch("https://swap.sollet.io/api/".concat(n),a);case 5:return i=e.sent,e.next=8,H(i);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return $.apply(this,arguments)}function $(){return($=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if((n=e.sent).success){e.next=5;break}throw new ee(n.error,t.status);case 5:return e.abrupt("return",n.result);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(e,r){var o;return Object(l.a)(this,n),(o=t.call(this,e)).name=void 0,o.status=void 0,o.name="SwapApiError",o.status=r,o}return n}(Object(V.a)(Error)),te=new Map,ne=new Map,re=o.a.createContext(null);function oe(e){var t=Object(r.useState)(new Map),n=Object(v.a)(t,2),o=n[0],a=n[1],i=Object(r.useState)(new Map),c=Object(v.a)(i,2),l=c[0],d=c[1],p=Object(r.useState)(new Map),b=Object(v.a)(p,2),j=b[0],f=b[1],m=e.swapClient;return Object(r.useEffect)((function(){m.program.provider.wallet.publicKey?L.OpenOrders.findForOwner(m.program.provider.connection,m.program.provider.wallet.publicKey,S).then(function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new Map,r=new Set,t.forEach((function(e){r.add(e.market.toString()),n.get(e.market.toString())?n.get(e.market.toString()).push(e):n.set(e.market.toString(),[e])})),!(r.size>100)){e.next=5;break}throw new Error("Too many markets. Please file an issue to update this");case 5:return e.next=7,h.utils.getMultipleAccounts(m.program.provider.connection,Object(B.a)(r).map((function(e){return new g.PublicKey(e)})));case 7:o=e.sent.map((function(e){return{publicKey:null===e||void 0===e?void 0:e.publicKey,account:new L.Market(L.Market.getLayout(S).decode(null===e||void 0===e?void 0:e.account.data),-1,-1,m.program.provider.opts,S)}})),d((function(e){var t=new Map(e);return o.forEach((function(e){t.set(e.publicKey.toString(),e.account)})),t})),a(n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):a(new Map)}),[m.program.provider.connection,m.program.provider.wallet.publicKey,m.program.provider.opts]),Object(R.jsx)(re.Provider,{value:{openOrders:o,marketCache:l,setMarketCache:d,orderbookCache:j,setOrderbookCache:f,swapClient:m},children:e.children})}function ae(){var e=Object(r.useContext)(re);if(null===e)throw new Error("Context not available");return e}function ie(){return ae().openOrders}function ce(e){var t=ae(),n=Object(E.a)(Object(u.a)(s.a.mark((function n(){var r,o;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",void 0);case 2:if(!t.marketCache.get(e.toString())){n.next=4;break}return n.abrupt("return",t.marketCache.get(e.toString()));case 4:return n.next=6,L.Market.load(t.swapClient.program.provider.connection,e,void 0,S);case 6:return r=n.sent,(o=new Map(t.marketCache)).set(e.toString(),r),t.setMarketCache(o),n.abrupt("return",r);case 11:case"end":return n.stop()}}),n)}))),[t.swapClient.program.provider.connection,e]);if(n.result)return n.result}function se(e){var t=function(e){var t=ae(),n=t.swapClient,r=t.orderbookCache,o=t.setOrderbookCache,a=ce(e),i=Object(E.a)(Object(u.a)(s.a.mark((function t(){var i,c,u,l,d,p;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&a){t.next=2;break}return t.abrupt("return",void 0);case 2:if(!r.get(e.toString())){t.next=4;break}return t.abrupt("return",r.get(e.toString()));case 4:return t.next=6,Promise.all([a.loadBids(n.program.provider.connection),a.loadAsks(n.program.provider.connection)]);case 6:return i=t.sent,c=Object(v.a)(i,2),u=c[0],l=c[1],d={bids:u,asks:l},(p=new Map(r)).set(e.toString(),d),o(p),t.abrupt("return",d);case 15:case"end":return t.stop()}}),t)}))),[n.program.provider.connection,e,a]);if(i.result)return i.result}(e);if(void 0!==t){var n=t.bids.items(!0).next().value,r=t.asks.items(!1).next().value;return n?r?(n.price+r.price)/2:n.price:r.price}}function ue(e,t){var n=le(e,t);return null===n?null:n.markets}function le(e,t){var n=ae().swapClient,r=z(),o=r.wormholeMap,a=r.solletMap,i=Object(E.a)(Object(u.a)(s.a.mark((function r(){var i,c,u,l,d;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,be(n.program.provider.connection,e,t,o,a);case 2:if(null===(i=r.sent)){r.next=6;break}return c=Object(v.a)(i,2),u=c[0],l=c[1],r.abrupt("return",{markets:[u],kind:l});case 6:if(null!==(d=n.route(e,t))){r.next=9;break}return r.abrupt("return",null);case 9:return"usdx",r.abrupt("return",{markets:d,kind:"usdx"});case 11:case"end":return r.stop()}}),r)}))),[e,t,n]);return i.result?i.result:null}var de=new Map([[pe(P,M),F],[pe(N,T),K]]);function pe(e,t){var n=e<t?[e,t]:[t,e],r=Object(v.a)(n,2),o=r[0],a=r[1];return o.toString()+a.toString()}function be(e,t,n,r,o){return je.apply(this,arguments)}function je(){return(je=Object(u.a)(s.a.mark((function e(t,n,r,o,a){var i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(i=fe(n,r))){e.next=3;break}return e.abrupt("return",[i,"wormhole-native"]);case 3:return e.next=5,ve(t,n,r,o,a);case 5:if(null!==(i=e.sent)){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",[i,"wormhole-sollet"]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e,t){var n;return null!==(n=de.get(pe(e,t)))&&void 0!==n?n:null}function ve(e,t,n,r,o){return me.apply(this,arguments)}function me(){return(me=Object(u.a)(s.a.mark((function e(t,n,r,o,a){var i,c,u,l,d,p,b,j,f,m,x,h,O,g,w,y;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=o.get(n.toString()),c=void 0!==i,u=o.get(r.toString()),l=void 0!==u,d=a.get(n.toString()),p=void 0!==d,b=a.get(r.toString()),j=void 0!==b,!c&&!l||c===l){e.next=28;break}if(!p&&!j||p===j){e.next=28;break}return m=p?n:r,x=c?[n,i]:[r,u],h=Object(v.a)(x,2),O=h[0],g=h[1],e.next=14,X(m);case 14:if((w=e.sent).erc20Contract===(null===(f=g.extensions)||void 0===f?void 0:f.address)){e.next=17;break}return e.abrupt("return",null);case 17:return e.next=19,xe(m,O);case 19:if(null!==(y=e.sent)){e.next=22;break}return e.abrupt("return",null);case 22:return e.next=24,Y(t,m,O,y,w);case 24:if(e.sent){e.next=27;break}return e.abrupt("return",null);case 27:return e.abrupt("return",y);case 28:return e.abrupt("return",null);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(e,t){return he.apply(this,arguments)}function he(){return(he=Object(u.a)(s.a.mark((function e(t,n){var r,o,a,i=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=i.length>2&&void 0!==i[2]?i[2]:0)>99)){e.next=4;break}return console.log("Swap market version cannot be greater than 99"),e.abrupt("return",null);case 4:if(!(r<0)){e.next=7;break}return console.log("Version cannot be less than zero"),e.abrupt("return",null);case 7:return o=function(e){return e<=99?"0".concat(e).slice(-2):e},a=t.toString().slice(0,15)+n.toString().slice(0,15)+o(r),e.next=11,g.PublicKey.createWithSeed(A,a,S);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Oe=o.a.createContext(null);function ge(e){var t,n,o,a,i=Object(r.useState)(null!==(t=e.fromMint)&&void 0!==t?t:C),c=Object(v.a)(i,2),s=c[0],u=c[1],l=Object(r.useState)(null!==(n=e.toMint)&&void 0!==n?n:M),d=Object(v.a)(l,2),p=d[0],b=d[1],j=Object(r.useState)(null!==(o=e.fromAmount)&&void 0!==o?o:0),f=Object(v.a)(j,2),m=f[0],x=f[1],h=Object(r.useState)(null!==(a=e.toAmount)&&void 0!==a?a:0),O=Object(v.a)(h,2),g=O[0],w=O[1],y=Object(r.useState)(!1),S=Object(v.a)(y,2),T=S[0],A=S[1],P=Object(r.useState)(.5),F=Object(v.a)(P,2),N=F[0],K=F[1],B=Object(r.useState)(null),E=Object(v.a)(B,2),L=E[0],W=E[1],q=ke(s,p,L);k.ok(N>=0);return Object(R.jsx)(Oe.Provider,{value:{fromMint:s,setFromMint:u,toMint:p,setToMint:b,fromAmount:m,setFromAmount:function(e){if(void 0===q)throw new Error("Fair price not found");x(e),w(e/q)},toAmount:g,setToAmount:function(e){if(void 0===q)throw new Error("Fair price not found");w(e),x(e*q)},swapToFromMints:function(){var e=s,t=m,n=g;u(p),b(e),x(n),w(t)},slippage:N,setSlippage:K,fairOverride:L,setFairOverride:W,isClosingNewAccounts:T,setIsClosingNewAccounts:A},children:e.children})}function we(){var e=Object(r.useContext)(Oe);if(null===e)throw new Error("Context not available");return e}function ye(){var e=we(),t=e.fairOverride;return ke(e.fromMint,e.toMint,t)}function ke(e,t,n){var r=function(e,t){var n=ue(e,t),r=se(n?n[0]:void 0),o=ce(n?n[0]:void 0),a=se(n?n[1]:void 0);if(null!==n){if(1===n.length&&void 0!==r){if(void 0===o)return;return(null===o||void 0===o?void 0:o.baseMintAddress.equals(e))?1/r:r}if(void 0!==r&&void 0!==a)return a/r}}(e,t);return null===n?r:n}var Se=n(82),Ce=o.a.createContext(null);function Me(e){var t=e.provider,n=Object(r.useState)(new Map),o=Object(v.a)(n,2),a=o[0],i=o[1];return Object(R.jsx)(Ce.Provider,{value:{mintCache:a,setMintCache:i,provider:t},children:e.children})}function Te(e){var t=Object(r.useContext)(Ce);if(null===t)throw new Error("Mint context not found");var n=Object(E.a)(Object(u.a)(s.a.mark((function n(){var r,o,a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",void 0);case 2:if(!t.mintCache.get(e.toString())){n.next=4;break}return n.abrupt("return",t.mintCache.get(e.toString()));case 4:return r=new Se.Token(t.provider.connection,e,Se.TOKEN_PROGRAM_ID,new g.Account),n.next=7,r.getMintInfo();case 7:return o=n.sent,(a=new Map(t.mintCache)).set(e.toString(),o),t.setMintCache(a),n.abrupt("return",o);case 12:case"end":return n.stop()}}),n)}))),[t.provider.connection,e]);if(n.result)return n.result}var Ae=n(3),Pe=n(24);function Fe(){return(Fe=Object(u.a)(s.a.mark((function e(t,n){var r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Be(n),e.next=3,t._rpcRequest("getProgramAccounts",[Se.TOKEN_PROGRAM_ID.toBase58(),{commitment:t.commitment,filters:r}]);case 3:if(!(o=e.sent).error){e.next=6;break}throw new Error("failed to get token accounts owned by "+n.toBase58()+": "+o.error.message);case 6:return e.abrupt("return",o.result.map((function(e){var t=e.pubkey,n=e.account,r=n.data,o=n.executable,a=n.owner,i=n.lamports;return{publicKey:new g.PublicKey(t),accountInfo:{data:Pe.decode(r),executable:o,owner:new g.PublicKey(a),lamports:i}}})).filter((function(e){var t=e.accountInfo;return r.every((function(e){if(e.dataSize)return t.data.length===e.dataSize;if(e.memcmp){var n=Pe.decode(e.memcmp.bytes);return t.data.slice(e.memcmp.offset,e.memcmp.offset+n.length).equals(n)}return!1}))})).map((function(e){return{publicKey:e.publicKey,account:Ke(e.accountInfo.data)}})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ne=Ae.struct([Ae.blob(32,"mint"),Ae.blob(32,"owner"),Ae.nu64("amount"),Ae.blob(93)]);Ae.struct([Ae.blob(44),Ae.u8("decimals"),Ae.blob(37)]);function Ke(e){var t=Ne.decode(e),n=t.mint,r=t.owner,o=t.amount;return{mint:new g.PublicKey(n),owner:new g.PublicKey(r),amount:new h.BN(o)}}function Be(e){return[{memcmp:{offset:Ne.offsetOf("owner"),bytes:e.toBase58()}},{dataSize:Ne.span}]}var Ee=o.a.createContext(null);function Le(e){var t=e.provider,n=Object(r.useState)(void 0),o=Object(v.a)(n,2),a=o[0],i=o[1];return Object(r.useEffect)((function(){t.wallet.publicKey?function(e,t){return Fe.apply(this,arguments)}(t.connection,t.wallet.publicKey).then(i):i(void 0)}),[t.wallet.publicKey,t.connection]),Object(R.jsx)(Ee.Provider,{value:{ownedTokenAccounts:a},children:e.children})}function Re(e){var t=Object(r.useContext)(Ee);if(null===t)throw new Error("Context not available");if(void 0===e)return e;if(void 0!==t.ownedTokenAccounts){var n=t.ownedTokenAccounts.filter((function(t){return t.account.mint.equals(e)}));return 0===n.length?null:(n.sort((function(e,t){return e.account.amount<t.account.amount?-1:e.account.amount>t.account.amount?1:0})),n[0])}}var We=n(387),qe=n(412),De=n(142),Ie=n(350),ze=n(417),Ge=n(413),Ue=n(418),Ve=n(388),Xe=n(392),_e=n(391),Ye=n(393),Ze=n(414),Je=n(394),Qe=n(351),He=Object(We.a)((function(){return{dialogContent:{paddingTop:0,paddingBottom:0},textField:{width:"100%",border:"solid 1pt #ccc",borderRadius:"10px",marginBottom:"8px"},tab:{minWidth:"134px"}}}));function $e(e){var t=e.open,n=e.onClose,o=e.setMint,a=Object(r.useState)(0),i=Object(v.a)(a,2),c=i[0],s=i[1],u=Object(r.useState)(""),l=Object(v.a)(u,2),d=l[0],p=l[1],b=d.toLowerCase(),j=He(),f=function(){var e=z();return{swappableTokens:e.swappableTokens,swappableTokensWormhole:e.swappableTokensWormhole,swappableTokensSollet:e.swappableTokensSollet}}(),m=f.swappableTokens,x=f.swappableTokensSollet,h=f.swappableTokensWormhole,O=0===c?m:1===c?h:x,g=""===d?O:O.filter((function(e){return e.symbol.toLowerCase().startsWith(b)||e.name.toLowerCase().startsWith(b)||e.address.toLowerCase().startsWith(b)}));return Object(R.jsxs)(Ue.a,{open:t,onClose:n,scroll:"paper",PaperProps:{style:{borderRadius:"10px",width:"420px"}},children:[Object(R.jsxs)(Ve.a,{style:{fontWeight:"bold"},children:[Object(R.jsx)(De.a,{variant:"h6",style:{paddingBottom:"16px"},children:"Select a token"}),Object(R.jsx)(ze.a,{className:j.textField,placeholder:"Search name",value:d,onChange:function(e){return p(e.target.value)},InputProps:{disableUnderline:!0,style:{padding:"10px"}}})]}),Object(R.jsx)(Xe.a,{className:j.dialogContent,dividers:!0,children:Object(R.jsx)(_e.a,{disablePadding:!0,children:g.map((function(e){return Object(R.jsx)(et,{tokenInfo:e,onClick:function(e){o(e),n()}},e.address)}))})}),Object(R.jsx)(Ye.a,{children:Object(R.jsxs)(Ze.a,{value:c,onChange:function(e,t){return s(t)},children:[Object(R.jsx)(Je.a,{value:0,className:j.tab,label:"Main"}),Object(R.jsx)(Je.a,{value:1,className:j.tab,label:"Wormhole"}),Object(R.jsx)(Je.a,{value:2,className:j.tab,label:"Sollet"})]})})]})}function et(e){var t=e.tokenInfo,n=e.onClick,r=new g.PublicKey(t.address);return Object(R.jsxs)(Qe.a,{button:!0,onClick:function(){return n(r)},children:[Object(R.jsx)(Vt,{mint:r,style:{width:"30px",borderRadius:"15px"}}),Object(R.jsx)(tt,{tokenInfo:t})]})}function tt(e){var t=e.tokenInfo;return Object(R.jsxs)("div",{style:{marginLeft:"16px"},children:[Object(R.jsx)(De.a,{style:{fontWeight:"bold"},children:null===t||void 0===t?void 0:t.symbol}),Object(R.jsx)(De.a,{color:"textSecondary",style:{fontSize:"14px"},children:null===t||void 0===t?void 0:t.name})]})}var nt=n(395),rt=n(420),ot=n(407),at=n(409),it=n(410),ct=n(421),st=n(408),ut=n(406),lt=n(70),dt=n.n(lt),pt=n(397),bt=n(398),jt=n(399),ft=n(400),vt=n(401),mt=n(402),xt=n(403),ht=n(415),Ot=n(404),gt=n(396),wt=Object(We.a)((function(e){return{table:{},closeAccountSwitchLabel:{color:e.palette.text.secondary}}}));function yt(e){var t=e.open,n=e.onClose;return Object(R.jsx)(Ue.a,{maxWidth:"lg",open:t,onClose:n,PaperProps:{style:{borderRadius:"10px"}},children:Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{style:{height:"24px",display:"flex",justifyContent:"space-between"},children:Object(R.jsx)(nt.a,{onClick:n,style:{padding:0,position:"absolute",right:"8px",top:"8px"},children:Object(R.jsx)(gt.a,{})})}),Object(R.jsx)(Xe.a,{style:{paddingTop:0},children:Object(R.jsx)(kt,{})})]})})}function kt(){var e=wt(),t=ie(),n=Object(r.useMemo)((function(){return Array.from(t.entries()).map((function(e){var t=Object(v.a)(e,2),n=t[0],r=t[1];return[new g.PublicKey(n),r]}))}),[t]);return Object(R.jsx)(pt.a,{component:Ie.a,elevation:0,children:Object(R.jsxs)(bt.a,{className:e.table,"aria-label":"simple table",children:[Object(R.jsx)(jt.a,{children:Object(R.jsxs)(ft.a,{children:[Object(R.jsx)(vt.a,{children:"Market"}),Object(R.jsx)(vt.a,{align:"center",children:"Open Orders Account"}),Object(R.jsx)(vt.a,{align:"center",children:"Base Used"}),Object(R.jsx)(vt.a,{align:"center",children:"Base Free"}),Object(R.jsx)(vt.a,{align:"center",children:"Quote Used"}),Object(R.jsx)(vt.a,{align:"center",children:"Quote Free"}),Object(R.jsx)(vt.a,{align:"center",children:"Settle"}),Object(R.jsx)(vt.a,{align:"center",children:"Close"})]})}),Object(R.jsx)(mt.a,{children:n.map((function(e){var t=Object(v.a)(e,2),n=t[0],r=t[1];return Object(R.jsx)(St,{market:n,openOrders:r},n.toString())}))})]})})}function St(e){var t,n,o=e.market,a=e.openOrders,i=Object(r.useState)(a[0]),c=Object(v.a)(i,2),l=c[0],d=c[1],p=ae().swapClient,b=ce(o),j=G(),f=Te(null===b||void 0===b?void 0:b.baseMintAddress),m=Te(null===b||void 0===b?void 0:b.quoteMintAddress),h=Re(null===b||void 0===b?void 0:b.baseMintAddress),O=Re(null===b||void 0===b?void 0:b.quoteMintAddress),g=b?null===(t=j.get(null===b||void 0===b?void 0:b.baseMintAddress.toString()))||void 0===t?void 0:t.symbol:"-",w=b?null===(n=j.get(null===b||void 0===b?void 0:b.quoteMintAddress.toString()))||void 0===n?void 0:n.symbol:"-",y=g&&w?"".concat(g," / ").concat(w):o.toString(),k=l.baseTokenFree.toNumber()+l.quoteTokenFree.toNumber()===0,S=l.baseTokenTotal.toNumber()+l.quoteTokenTotal.toNumber()!==0,C=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}throw new Error("Market client not found");case 2:if(h&&O){e.next=4;break}throw new Error("Base or quote wallet not found");case 4:return void 0,e.next=7,b.makeSettleFundsTransaction(p.program.provider.connection,l,h.publicKey,O.publicKey,undefined);case 7:return t=e.sent,n=t.transaction,r=t.signers,e.next=12,p.program.provider.send(n,r);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(R.jsxs)(ft.a,{children:[Object(R.jsx)(vt.a,{component:"th",scope:"row",children:Object(R.jsx)(De.a,{children:Object(R.jsx)(xt.a,{href:"https://dex.projectserum.com/#/market/".concat(o.toString()),target:"_blank",rel:"noopener",children:y})})}),Object(R.jsx)(vt.a,{align:"center",children:Object(R.jsx)(ht.a,{value:l.address.toString(),onChange:function(e){return d(a.filter((function(t){return t.address.toString()===e.target.value}))[0])},children:a.map((function(e){return Object(R.jsx)(Ot.a,{value:e.address.toString(),children:e.address.toString()},e.address.toString())}))})}),Object(R.jsx)(vt.a,{align:"center",children:Ct(f,l.baseTokenTotal.sub(l.baseTokenFree))}),Object(R.jsx)(vt.a,{align:"center",children:Ct(f,l.baseTokenFree)}),Object(R.jsx)(vt.a,{align:"center",children:Ct(m,l.quoteTokenTotal.sub(l.quoteTokenFree))}),Object(R.jsx)(vt.a,{align:"center",children:Ct(m,l.quoteTokenFree)}),Object(R.jsx)(vt.a,{align:"center",children:Object(R.jsx)(x.a,{color:"primary",disabled:k,onClick:C,children:"Settle"})}),Object(R.jsx)(vt.a,{align:"center",children:Object(R.jsx)(x.a,{color:"secondary",disabled:S,onClick:M,children:"Close"})})]},o.toString())}function Ct(e,t){return e?(t.toNumber()/Math.pow(10,e.decimals)).toFixed(e.decimals):t.toNumber().toString()}var Mt=Object(We.a)((function(e){return{tab:{width:"50%"},table:{},settingsButton:{padding:0},closeAccountSwitchLabel:{color:e.palette.text.secondary}}}));function Tt(){var e=Mt();return Object(R.jsx)(dt.a,{variant:"popover",children:function(t){return Object(R.jsxs)("div",{children:[Object(R.jsx)(nt.a,Object(U.a)(Object(U.a)({},Object(lt.bindTrigger)(t)),{},{className:e.settingsButton,children:Object(R.jsx)(ut.a,{})})),Object(R.jsx)(rt.a,Object(U.a)(Object(U.a)({},Object(lt.bindPopover)(t)),{},{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{borderRadius:"10px"}},children:Object(R.jsx)(At,{})}))]})}})}function At(){var e=we(),t=e.slippage,n=e.setSlippage,o=e.fairOverride,a=e.setFairOverride,i=Object(r.useState)(!1),c=Object(v.a)(i,2),s=c[0],u=c[1],l=ye(),d=ae().swapClient;return Object(R.jsxs)("div",{style:{padding:"15px",width:"305px"},children:[Object(R.jsx)(De.a,{color:"textSecondary",style:{fontWeight:"bold"},children:"Settings"}),Object(R.jsxs)("div",{style:{marginTop:"10px"},children:[Object(R.jsxs)("div",{children:[Object(R.jsx)(De.a,{color:"textSecondary",children:"Slippage tolerance"}),Object(R.jsx)(ze.a,{type:"number",placeholder:"Error tolerance percentage",value:t,onChange:function(e){return n(parseFloat(e.target.value))},style:{display:"flex",justifyContent:"center",flexDirection:"column"},InputProps:{endAdornment:Object(R.jsx)(ot.a,{position:"end",children:"%"})}})]}),Object(R.jsxs)("div",{style:{marginTop:"5px"},children:[Object(R.jsx)(De.a,{color:"textSecondary",children:"Fair price"}),Object(R.jsxs)("div",{style:{display:"flex"},children:[Object(R.jsx)(ze.a,{type:"number",placeholder:"Fair price override",value:l,onChange:function(e){return a(parseFloat(e.target.value))},style:{marginRight:"10px",flex:1,display:"flex",justifyContent:"center",flexDirection:"column"},disabled:null===o}),Object(R.jsx)(st.a,{value:"bold",selected:null===o,onClick:function(){void 0!==l?a(null===o?l:null):console.error("Fair is undefined")},style:{paddingTop:"3px",paddingBottom:"3px",paddingLeft:"5px",paddingRight:"5px",borderRadius:"20px"},children:"Auto"})]})]}),Object(R.jsx)("div",{style:{marginTop:"5px"},children:Object(R.jsx)(Pt,{})}),Object(R.jsx)(x.a,{style:{width:"100%",marginTop:"10px",background:"#e0e0e0"},disabled:null===d.program.provider.wallet.publicKey,onClick:function(){return u(!0)},children:"Manage Dex Accounts"})]}),Object(R.jsx)(yt,{open:s,onClose:function(){return u(!1)}})]})}function Pt(){var e=Mt(),t=we(),n=t.isClosingNewAccounts,r=t.setIsClosingNewAccounts;return Object(R.jsx)(at.a,{row:!0,children:Object(R.jsx)(it.a,{classes:{label:e.closeAccountSwitchLabel},labelPlacement:"start",style:{display:"flex",justifyContent:"space-between",marginLeft:0,width:"100%"},control:Object(R.jsx)(ct.a,{checked:n,onChange:function(){return r(!n)},color:"primary"}),label:"Close new accounts"})})}var Ft=n(411),Nt=Object(We.a)((function(e){return{infoLabel:{marginTop:"10px",marginBottom:"10px",display:"flex",justifyContent:"space-between",marginLeft:"5px",marginRight:"5px"},fairPriceLabel:{marginRight:"10px",display:"flex",justifyContent:"center",flexDirection:"column",color:e.palette.text.secondary},infoButton:{padding:0}}}));function Kt(){var e=Nt(),t=we(),n=t.fromMint,r=t.toMint,o=Te(n),a=ye(),i=G(),c=i.get(n.toString()),s=i.get(r.toString());return Object(R.jsxs)("div",{className:e.infoLabel,children:[Object(R.jsx)(De.a,{color:"textSecondary"}),Object(R.jsxs)("div",{style:{display:"flex"},children:[Object(R.jsx)("div",{className:e.fairPriceLabel,children:void 0!==a&&s&&c?"1 ".concat(s.symbol," = ").concat(a.toFixed(null===o||void 0===o?void 0:o.decimals)," ").concat(c.symbol):"-"}),Object(R.jsx)(Bt,{})]})]})}function Bt(){var e=Nt();return Object(R.jsx)(dt.a,{variant:"popover",children:function(t){return Object(R.jsxs)("div",{style:{display:"flex"},children:[Object(R.jsx)(nt.a,Object(U.a)(Object(U.a)({},Object(lt.bindTrigger)(t)),{},{className:e.infoButton,children:Object(R.jsx)(Ft.a,{})})),Object(R.jsx)(rt.a,Object(U.a)(Object(U.a)({},Object(lt.bindPopover)(t)),{},{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{borderRadius:"10px"}},disableRestoreFocus:!0,children:Object(R.jsx)(Et,{})}))]})}})}function Et(){var e,t,n=we(),r=n.fromMint,o=n.toMint,a=ue(r,o),i=G(),c=[{ticker:null===(e=i.get(r.toString()))||void 0===e?void 0:e.symbol,mint:r},{ticker:null===(t=i.get(o.toString()))||void 0===t?void 0:t.symbol,mint:o}];return Object(R.jsxs)("div",{style:{padding:"15px",width:"250px"},children:[Object(R.jsxs)("div",{children:[Object(R.jsx)(De.a,{color:"textSecondary",style:{fontWeight:"bold",marginBottom:"5px"},children:"Trade Route"}),a?a.map((function(e){return Object(R.jsx)(Lt,{market:e},e.toString())})):Object(R.jsx)(De.a,{color:"textSecondary",children:"Route not found"})]}),Object(R.jsxs)("div",{style:{marginTop:"15px"},children:[Object(R.jsx)(De.a,{color:"textSecondary",style:{fontWeight:"bold",marginBottom:"5px"},children:"Tokens"}),c.map((function(e){return Object(R.jsxs)("div",{style:{marginTop:"5px",display:"flex",justifyContent:"space-between"},children:[Object(R.jsx)(xt.a,{href:"https://explorer.solana.com/address/".concat(e.mint.toString()),target:"_blank",rel:"noopener",children:e.ticker}),Object(R.jsx)("code",{style:{width:"128px",overflow:"hidden"},children:e.mint.toString()})]},e.mint.toString())}))]})]})}function Lt(e){var t=e.market,n=function(e){var t,n,r=G(),o=ce(e);if(!o)return null;var a=o?null===(t=r.get(null===o||void 0===o?void 0:o.baseMintAddress.toString()))||void 0===t?void 0:t.symbol:"-",i=o?null===(n=r.get(null===o||void 0===o?void 0:o.quoteMintAddress.toString()))||void 0===n?void 0:n.symbol:"-";return"".concat(a," / ").concat(i)}(t),r=se(t);return Object(R.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"5px"},children:[Object(R.jsx)(xt.a,{href:"https://dex.projectserum.com/#/market/".concat(t.toString()),target:"_blank",rel:"noopener",children:n}),Object(R.jsx)("code",{style:{marginLeft:"10px"},children:r?r.toFixed(6):"-"})]})}var Rt=Object(We.a)((function(){return{card:{width:"450px",borderRadius:"10px",border:"solid 1pt #e0e0e0"},cardContent:{marginLeft:"6px",marginRight:"6px",marginBottom:"6px"},tab:{width:"50%"},settingsButton:{padding:0},swapButton:{width:"100%",borderRadius:"15px"},swapToFromButton:{display:"block",marginLeft:"auto",marginRight:"auto"}}}));function Wt(e){var t=e.style,n=Rt();return Object(R.jsx)("div",{style:t,children:Object(R.jsxs)(qe.a,{className:n.card,children:[Object(R.jsx)(qt,{}),Object(R.jsxs)("div",{className:n.cardContent,children:[Object(R.jsx)(It,{}),Object(R.jsx)(Dt,{}),Object(R.jsx)(zt,{}),Object(R.jsx)(Kt,{}),Object(R.jsx)(_t,{})]})]})})}function qt(){return Object(R.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",margin:"8px"},children:[Object(R.jsx)(De.a,{style:{fontWeight:"bold",display:"flex",justifyContent:"center",flexDirection:"column"},children:"Swap"}),Object(R.jsx)(Tt,{})]})}function Dt(){var e=Rt(),t=we().swapToFromMints;return Object(R.jsx)(x.a,{className:e.swapToFromButton,onClick:t,children:"\u21c5"})}function It(){var e=we(),t=e.fromMint,n=e.setFromMint,r=e.fromAmount,o=e.setFromAmount;return Object(R.jsx)(Gt,{mint:t,setMint:n,amount:r,setAmount:o})}function zt(){var e=we(),t=e.toMint,n=e.setToMint,r=e.toAmount,o=e.setToAmount;return Object(R.jsx)(Gt,{mint:t,setMint:n,amount:r,setAmount:o})}function Gt(e){var t=e.mint,n=e.setMint,o=e.amount,a=e.setAmount,i=Object(r.useState)(!1),c=Object(v.a)(i,2),s=c[0],u=c[1],l=Re(t),d=Te(t);return Object(R.jsxs)(Ie.a,{elevation:0,variant:"outlined",style:{borderRadius:"10px"},children:[Object(R.jsxs)("div",{style:{height:"50px",display:"flex",justifyContent:"space-between"},children:[Object(R.jsx)(Ut,{mint:t,onClick:function(){return u(!0)}}),Object(R.jsx)(ze.a,{type:"number",value:o,onChange:function(e){return a(parseFloat(e.target.value))},style:{display:"flex",justifyContent:"center",flexDirection:"column"}})]}),Object(R.jsx)("div",{style:{marginLeft:"10px",height:"30px"},children:Object(R.jsx)(De.a,{color:"textSecondary",style:{fontSize:"14px"},children:l&&d?"Balance: ".concat((l.account.amount.toNumber()/Math.pow(10,d.decimals)).toFixed(d.decimals)):"-"})}),Object(R.jsx)($e,{setMint:n,open:s,onClose:function(){return u(!1)}})]})}function Ut(e){var t=e.mint,n=e.onClick;return Object(R.jsxs)(x.a,{onClick:n,style:{minWidth:"116px"},children:[Object(R.jsx)(Vt,{mint:t,style:{width:"25px",borderRadius:"13px"}}),Object(R.jsx)(Xt,{mint:t}),Object(R.jsx)(Ge.a,{})]})}function Vt(e){var t=e.mint,n=e.style,r=G().get(t.toString());return Object(R.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:(null===r||void 0===r?void 0:r.logoURI)?Object(R.jsx)("img",{alt:"Logo",style:n,src:null===r||void 0===r?void 0:r.logoURI}):Object(R.jsx)("div",{style:n})})}function Xt(e){var t=e.mint,n=G().get(t.toString());return Object(R.jsx)(De.a,{style:{marginLeft:"5px"},children:null===n||void 0===n?void 0:n.symbol})}function _t(){var e=Rt(),t=we(),n=t.fromMint,r=t.toMint,o=t.fromAmount,a=t.toAmount,i=t.slippage,c=t.isClosingNewAccounts,l=ae().swapClient,d=Te(n),p=Te(r),b=ie(),j=le(n,r),f=ce(j&&j.markets?j.markets[0]:void 0),v=ce(j&&j.markets?j.markets[1]:void 0),m=function(){var e,t,n,r,o=we(),a=o.fromMint,i=o.toMint,c=o.fromAmount,s=o.toAmount,u=ae().swapClient,l=z(),d=l.wormholeMap,p=l.solletMap,b=le(a,i);return null!==b&&!1===a.equals(i)&&null!==u.program.provider.wallet.publicKey&&c>0&&s>0&&null!==b&&("wormhole-native"!==b.kind||void 0!==(null===(e=d.get(a.toString()))||void 0===e||null===(t=e.tags)||void 0===t?void 0:t.includes(D)))&&("wormhole-sollet"!==b.kind||void 0!==(null===(n=p.get(a.toString()))||void 0===n||null===(r=n.tags)||void 0===r?void 0:r.includes(q)))}(),O=function(){var e=Object(u.a)(s.a.mark((function e(){var t,u,j,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d&&p){e.next=2;break}throw new Error("Unable to calculate mint decimals");case 2:return t=new h.BN(o).mul(new h.BN(10).pow(new h.BN(d.decimals))),u=new h.BN(a).mul(new h.BN(10).pow(new h.BN(p.decimals))).muln(100-i).divn(100),j=f?b.get(null===f||void 0===f?void 0:f.address.toString()):void 0,m=v?b.get(null===v||void 0===v?void 0:v.address.toString()):void 0,e.next=8,l.swap({fromMint:n,toMint:r,amount:t,minExpectedSwapAmount:u,fromMarket:f,toMarket:v,fromOpenOrders:j?j[0].address:void 0,toOpenOrders:m?m[0].address:void 0,close:c});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(R.jsx)(x.a,{variant:"contained",className:e.swapButton,onClick:O,disabled:!m,children:"Swap"})}function Yt(e){var t=e.style,n=e.provider,r=e.tokenList,o=e.fromMint,a=e.toMint,i=e.fromAmount,c=e.toAmount,s=new y.Swap(n,r);return Object(R.jsx)(I,{tokenList:r,children:Object(R.jsx)(Me,{provider:n,children:Object(R.jsx)(Le,{provider:n,children:Object(R.jsx)(oe,{swapClient:s,children:Object(R.jsx)(ge,{fromMint:o,toMint:a,fromAmount:i,toAmount:c,children:Object(R.jsx)(Wt,{style:t})})})})})})}n(348);function Zt(){var e=Object(m.b)().enqueueSnackbar,t=Object(r.useState)(!1),n=Object(v.a)(t,2),o=n[0],a=n[1],i=Object(r.useState)(null),c=Object(v.a)(i,2),s=c[0],u=c[1],l=Object(r.useMemo)((function(){var t={preflightCommitment:"recent",commitment:"recent"},n="https://solana-api.projectserum.com",r=new O.a("https://www.sollet.io",n),o=new g.Connection(n,t.preflightCommitment);return[new Jt(o,r,t,(function(t,n){n?e("Error: ".concat(n.toString()),{variant:"error"}):e("Transaction sent",{variant:"success",action:Object(R.jsx)(x.a,{color:"inherit",component:"a",target:"_blank",rel:"noopener",href:"https://explorer.solana.com/tx/".concat(t),children:"View on Solana Explorer"})})})),r]}),[e]),d=Object(v.a)(l,2),p=d[0],b=d[1];return Object(r.useEffect)((function(){(new w.a).resolve().then(u)}),[u]),Object(r.useEffect)((function(){b.on("connect",(function(){e("Wallet connected",{variant:"success"}),a(!0)})),b.on("disconnect",(function(){e("Wallet disconnected",{variant:"info"}),a(!1)}))}),[b,e]),Object(R.jsxs)("div",{style:{width:"450px",marginLeft:"auto",marginRight:"auto",position:"absolute",left:0,right:0,top:0,bottom:0,display:"flex",justifyContent:"center",flexDirection:"column"},children:[Object(R.jsx)(x.a,{variant:"outlined",onClick:function(){return o?b.disconnect():b.connect()},style:{position:"fixed",right:24,top:24},children:o?"Disconnect":"Connect"}),s&&Object(R.jsx)(Yt,{provider:p,tokenList:s})]})}var Jt=function(e){Object(j.a)(n,e);var t=Object(f.a)(n);function n(e,r,o,a){var i;return Object(l.a)(this,n),(i=t.call(this,e,r,o)).onTransaction=void 0,i.onTransaction=a,i}return Object(d.a)(n,[{key:"send",value:function(){var e=Object(u.a)(s.a.mark((function e(t,r,o){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(p.a)(Object(b.a)(n.prototype),"send",this).call(this,t,r,o);case 3:return a=e.sent,this.onTransaction(a),e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),this.onTransaction(void 0,e.t0),e.abrupt("return","");case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t,n,r){return e.apply(this,arguments)}}()}]),n}(h.Provider),Qt=function(){return Object(R.jsx)(m.a,{maxSnack:5,autoHideDuration:8e3,children:Object(R.jsx)(Zt,{})})},Ht=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,423)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),o(e),a(e),i(e)}))};i.a.render(Object(R.jsx)(o.a.StrictMode,{children:Object(R.jsx)(Qt,{})}),document.getElementById("root")),Ht()}},[[349,1,2]]]);
//# sourceMappingURL=main.aba701bf.chunk.js.map